{"version":3,"file":"tall-toasts.js","sources":["../../builds/cdn.js","../../resources/js/tall-toasts.js"],"sourcesContent":["import toast from '../resources/js/tall-toasts';\n\ndocument.addEventListener('alpine:initializing', () => {\n  toast(window.Alpine);\n});\n","export default function (Alpine) {\n  Alpine.data('ToastComponent',\n    ($wire) => ({\n      defaultDuration: $wire.defaultDuration,\n      wireToasts: $wire.$entangle('toasts'),\n      prod: $wire.$entangle('prod'),\n      wireToastsIndex: 0,\n      toasts: [],\n      pendingToasts: [],\n      pendingRemovals: [],\n      count: 0,\n      loaded: false,\n\n      init () {\n        window.Toast = {\n          component: this,\n\n          make: (message, title, type, duration) => ({ title, message, type, duration }),\n\n          debug (message, title = '', duration = undefined) {\n            this.component.add(this.make(message, title, 'debug', duration ?? this.component.defaultDuration));\n          },\n\n          info (message, title = '', duration = undefined) {\n            this.component.add(this.make(message, title, 'info', duration ?? this.component.defaultDuration));\n          },\n\n          success (message, title = '', duration = undefined) {\n            this.component.add(this.make(message, title, 'success', duration ?? this.component.defaultDuration));\n          },\n\n          warning (message, title = '', duration = undefined) {\n            this.component.add(this.make(message, title, 'warning', duration ?? this.component.defaultDuration));\n          },\n\n          danger (message, title = '', duration = undefined) {\n            this.component.add(this.make(message, title, 'danger', duration ?? this.component.defaultDuration));\n          }\n        };\n\n        addEventListener('toast', (event) => {\n          this.add(event.detail);\n        });\n\n        this.fetchWireToasts();\n\n        this.$watch('wireToasts', () => {\n          this.fetchWireToasts();\n        });\n\n        setTimeout(() => {\n          this.loaded = true;\n          this.pendingToasts.forEach((toast) => {\n            this.add(toast);\n          });\n          this.pendingToasts = null;\n        }, $wire.loadDelay);\n      },\n\n      fetchWireToasts () {\n        this.wireToasts.forEach((toast, i) => {\n          if (i < this.wireToastsIndex) {\n            return;\n          }\n\n          this.add(window.Alpine.raw(toast));\n\n          this.wireToastsIndex++;\n        });\n      },\n\n      add (toast) {\n        if (this.loaded !== true) {\n          this.pendingToasts.push(toast);\n\n          return;\n        }\n\n        if (toast.type === 'debug') {\n          if (this.prod) {\n            return;\n          }\n\n          console.log(toast.title, toast.message);\n        }\n\n        toast.type ??= 'info';\n        toast.show = 0;\n        toast.index = this.count;\n\n        this.toasts[this.count] = toast;\n\n        this.scheduleRemoval(this.count);\n\n        this.count++;\n      },\n\n      scheduleRemoval (toastIndex) {\n        if (Object.keys(this.pendingRemovals).includes(toastIndex.toString())) {\n          return;\n        }\n\n        if (this.toasts[toastIndex].duration === 0) {\n          return;\n        }\n\n        this.pendingRemovals[toastIndex] = setTimeout(() => {\n          this.remove(toastIndex);\n        }, this.toasts[toastIndex].duration);\n      },\n\n      scheduleRemovalWithOlder (toastIndex = this.count) {\n        for (let i = 0; i < toastIndex; i++) {\n          this.scheduleRemoval(i);\n        }\n      },\n\n      cancelRemovalWithNewer (toastIndex) {\n        for (let i = this.count - 1; i >= toastIndex; i--) {\n          clearTimeout(this.pendingRemovals[i]);\n          delete this.pendingRemovals[i];\n        }\n      },\n\n      remove (index) {\n        if (this.toasts[index]) {\n          this.toasts[index].show = 0;\n        }\n\n        setTimeout(() => {\n          this.toasts[index] = '';\n          delete this.pendingRemovals[index];\n        }, 500);\n      }\n\n    })\n  );\n}\n"],"names":["document","addEventListener","window","Alpine","data","$wire","defaultDuration","wireToasts","$entangle","prod","wireToastsIndex","toasts","pendingToasts","pendingRemovals","count","loaded","init","_this","this","Toast","component","make","message","title","type","duration","debug","arguments","length","undefined","add","info","success","warning","danger","event","detail","fetchWireToasts","$watch","setTimeout","forEach","toast","loadDelay","_this2","i","raw","_toast$type","console","log","show","index","scheduleRemoval","push","toastIndex","_this3","Object","keys","includes","toString","remove","scheduleRemovalWithOlder","cancelRemovalWithNewer","clearTimeout","_this4"],"mappings":"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"}